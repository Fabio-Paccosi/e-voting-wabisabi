{"ast":null,"code":"var _jsxFileName = \"/Users/fabiopaccosi/Projects/Personale/wabisabi_evoting/client/src/components/VotingPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useVoting } from '../contexts/VotingContext';\nimport { Vote, Shield, Key, CheckCircle, AlertCircle, Loader, ArrowLeft, Lock, Bitcoin, Users } from 'lucide-react';\nimport WabiSabiVoting from '../services/WabiSabiVoting';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VotingPage = () => {\n  _s();\n  const {\n    electionId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const {\n    voting,\n    setVoting\n  } = useVoting();\n  const navigate = useNavigate();\n\n  // State management\n  const [election, setElection] = useState(null);\n  const [candidates, setCandidates] = useState([]);\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\n  const [currentStep, setCurrentStep] = useState('loading'); // loading, selection, crypto, voting, complete\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [votingProgress, setVotingProgress] = useState(0);\n  const [cryptoStatus, setCryptoStatus] = useState('');\n  const [bitcoinAddress, setBitcoinAddress] = useState('');\n  const [credential, setCredential] = useState(null);\n  const wabiSabiVoting = new WabiSabiVoting();\n  useEffect(() => {\n    loadElectionData();\n  }, [electionId]);\n  const loadElectionData = async () => {\n    try {\n      setLoading(true);\n\n      // Load election details and candidates\n      const [electionResponse, candidatesResponse] = await Promise.all([api.get(`/elections/${electionId}`), api.get(`/elections/${electionId}/candidates`)]);\n      setElection(electionResponse.data.election);\n      setCandidates(candidatesResponse.data.candidates || []);\n\n      // Check if user has already voted\n      if (electionResponse.data.election.hasVoted) {\n        setError('Hai gi√† votato in questa elezione');\n        setTimeout(() => navigate('/elections'), 3000);\n        return;\n      }\n      setCurrentStep('selection');\n    } catch (err) {\n      console.error('Error loading election:', err);\n      setError('Errore nel caricamento dell\\'elezione');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCandidateSelect = candidate => {\n    setSelectedCandidate(candidate);\n    setError('');\n  };\n  const startVotingProcess = async () => {\n    if (!selectedCandidate) {\n      setError('Seleziona un candidato prima di procedere');\n      return;\n    }\n    setCurrentStep('crypto');\n    setCryptoStatus('Inizializzazione processo crittografico...');\n    setVotingProgress(0);\n    try {\n      // Step 1: Generate Bitcoin address for this voting session\n      setCryptoStatus('Generazione indirizzo Bitcoin...');\n      setVotingProgress(20);\n      const addressData = await wabiSabiVoting.generateVotingAddress(user.id, electionId);\n      setBitcoinAddress(addressData.address);\n\n      // Step 2: Request KVAC credentials\n      setCryptoStatus('Richiesta credenziali anonime KVAC...');\n      setVotingProgress(40);\n      const credentialData = await wabiSabiVoting.requestCredentials(user.id, electionId);\n      setCredential(credentialData);\n\n      // Step 3: Create vote commitment\n      setCryptoStatus('Creazione commitment crittografico...');\n      setVotingProgress(60);\n      const voteCommitment = await wabiSabiVoting.createVoteCommitment(selectedCandidate.id, credentialData.serialNumber, addressData.privateKey);\n\n      // Step 4: Generate zero-knowledge proof\n      setCryptoStatus('Generazione prova zero-knowledge...');\n      setVotingProgress(80);\n      const zkProof = await wabiSabiVoting.generateZKProof(voteCommitment, credentialData, selectedCandidate.valueEncoding);\n\n      // Step 5: Submit anonymous vote\n      setCryptoStatus('Invio voto anonimo...');\n      setVotingProgress(90);\n      setCurrentStep('voting');\n      const voteSubmissionResult = await wabiSabiVoting.submitAnonymousVote({\n        electionId,\n        commitment: voteCommitment.commitment,\n        zkProof,\n        serialNumber: credentialData.serialNumber,\n        bitcoinAddress: addressData.address\n      });\n\n      // Step 6: Wait for CoinJoin completion\n      setCryptoStatus('Attesa aggregazione CoinJoin...');\n      setVotingProgress(100);\n      await wabiSabiVoting.waitForCoinJoinCompletion(voteSubmissionResult.voteId);\n\n      // Complete\n      setCurrentStep('complete');\n      setCryptoStatus('Voto registrato con successo sulla blockchain!');\n    } catch (err) {\n      console.error('Voting process error:', err);\n      setError(`Errore durante il processo di voto: ${err.message}`);\n      setCurrentStep('selection');\n      setVotingProgress(0);\n    }\n  };\n  const goBackToElections = () => {\n    navigate('/elections');\n  };\n  const viewResults = () => {\n    navigate('/results');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Caricamento elezione...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !election) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        size: 48\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Errore\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackToElections,\n        className: \"button secondary\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), \"Torna alle Elezioni\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"voting-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voting-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackToElections,\n        className: \"back-button\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), \"Indietro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"election-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: election === null || election === void 0 ? void 0 : election.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: election === null || election === void 0 ? void 0 : election.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step ${currentStep === 'selection' || currentStep === 'crypto' || currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Selezione\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step ${currentStep === 'crypto' || currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Crittografia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step ${currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(Vote, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Voto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step ${currentStep === 'complete' ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Completato\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), currentStep === 'selection' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voting-step\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Seleziona il Candidato\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Scegli il candidato per il quale vuoi esprimere il tuo voto anonimo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"candidates-grid\",\n        children: candidates.map(candidate => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `candidate-card ${(selectedCandidate === null || selectedCandidate === void 0 ? void 0 : selectedCandidate.id) === candidate.id ? 'selected' : ''}`,\n          onClick: () => handleCandidateSelect(candidate),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"candidate-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [candidate.firstName, \" \", candidate.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this), candidate.party && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"party\",\n              children: candidate.party\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 39\n            }, this), candidate.biography && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"biography\",\n              children: candidate.biography\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 17\n          }, this), (selectedCandidate === null || selectedCandidate === void 0 ? void 0 : selectedCandidate.id) === candidate.id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-indicator\",\n            children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 19\n          }, this)]\n        }, candidate.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-error\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startVotingProcess,\n          disabled: !selectedCandidate,\n          className: \"button primary large\",\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), \"Procedi con Voto Anonimo\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"privacy-notice\",\n        children: [/*#__PURE__*/_jsxDEV(Lock, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Il tuo voto sar\\xE0 completamente anonimo grazie al protocollo WabiSabi. Nessuno potr\\xE0 collegare il tuo voto alla tua identit\\xE0.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }, this), (currentStep === 'crypto' || currentStep === 'voting') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voting-step\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Processo Crittografico WabiSabi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Stiamo rendendo il tuo voto completamente anonimo...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crypto-progress\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-fill\",\n            style: {\n              width: `${votingProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"progress-text\",\n          children: [votingProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crypto-status\",\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          size: 20,\n          className: \"spinning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: cryptoStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), bitcoinAddress && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bitcoin-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-item\",\n          children: [/*#__PURE__*/_jsxDEV(Bitcoin, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Indirizzo Bitcoin generato:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n          className: \"bitcoin-address\",\n          children: bitcoinAddress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 13\n      }, this), credential && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"credential-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-item\",\n          children: [/*#__PURE__*/_jsxDEV(Key, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Credenziale KVAC ricevuta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n          className: \"serial-number\",\n          children: [\"Serial: \", credential.serialNumber.substring(0, 16), \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crypto-explanation\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Cosa sta succedendo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2705 Generazione di un indirizzo Bitcoin unico per questa votazione\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2705 Richiesta di credenziali anonime KVAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2705 Creazione di un commitment crittografico del voto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2705 Generazione di prove zero-knowledge\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\uD83D\\uDD04 Invio del voto anonimo al coordinatore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u23F3 Attesa dell'aggregazione CoinJoin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this), currentStep === 'complete' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voting-step\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-header\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          size: 64,\n          className: \"success-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Voto Registrato con Successo!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Il tuo voto anonimo \\xE8 stato registrato sulla blockchain Bitcoin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-card\",\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            size: 32\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Anonimato Garantito\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Il tuo voto \\xE8 stato mixato con altri voti attraverso il protocollo WabiSabi, rendendo impossibile risalire alla tua identit\\xE0.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-card\",\n          children: [/*#__PURE__*/_jsxDEV(Bitcoin, {\n            size: 32\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Registrato su Blockchain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Il voto \\xE8 stato permanentemente registrato sulla blockchain Bitcoin, garantendo immutabilit\\xE0 e verificabilit\\xE0.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-card\",\n          children: [/*#__PURE__*/_jsxDEV(Lock, {\n            size: 32\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Processo Sicuro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Sono state utilizzate credenziali crittografiche avanzate e prove zero-knowledge per proteggere la tua privacy.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: viewResults,\n          className: \"button primary\",\n          children: [/*#__PURE__*/_jsxDEV(Vote, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this), \"Visualizza Risultati\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: goBackToElections,\n          className: \"button secondary\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this), \"Torna alle Elezioni\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n};\n_s(VotingPage, \"GWsjouz1+KD6QXQF7llTn8zf3dA=\", false, function () {\n  return [useParams, useAuth, useVoting, useNavigate];\n});\n_c = VotingPage;\nexport default VotingPage;\nvar _c;\n$RefreshReg$(_c, \"VotingPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","useVoting","Vote","Shield","Key","CheckCircle","AlertCircle","Loader","ArrowLeft","Lock","Bitcoin","Users","WabiSabiVoting","api","jsxDEV","_jsxDEV","VotingPage","_s","electionId","user","voting","setVoting","navigate","election","setElection","candidates","setCandidates","selectedCandidate","setSelectedCandidate","currentStep","setCurrentStep","loading","setLoading","error","setError","votingProgress","setVotingProgress","cryptoStatus","setCryptoStatus","bitcoinAddress","setBitcoinAddress","credential","setCredential","wabiSabiVoting","loadElectionData","electionResponse","candidatesResponse","Promise","all","get","data","hasVoted","setTimeout","err","console","handleCandidateSelect","candidate","startVotingProcess","addressData","generateVotingAddress","id","address","credentialData","requestCredentials","voteCommitment","createVoteCommitment","serialNumber","privateKey","zkProof","generateZKProof","valueEncoding","voteSubmissionResult","submitAnonymousVote","commitment","waitForCoinJoinCompletion","voteId","message","goBackToElections","viewResults","className","children","fileName","_jsxFileName","lineNumber","columnNumber","size","onClick","title","description","map","firstName","lastName","party","biography","disabled","style","width","substring","_c","$RefreshReg$"],"sources":["/Users/fabiopaccosi/Projects/Personale/wabisabi_evoting/client/src/components/VotingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useVoting } from '../contexts/VotingContext';\nimport { \n  Vote, \n  Shield, \n  Key, \n  CheckCircle, \n  AlertCircle, \n  Loader,\n  ArrowLeft,\n  Lock,\n  Bitcoin,\n  Users\n} from 'lucide-react';\nimport WabiSabiVoting from '../services/WabiSabiVoting';\nimport api from '../services/api';\n\nconst VotingPage = () => {\n  const { electionId } = useParams();\n  const { user } = useAuth();\n  const { voting, setVoting } = useVoting();\n  const navigate = useNavigate();\n\n  // State management\n  const [election, setElection] = useState(null);\n  const [candidates, setCandidates] = useState([]);\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\n  const [currentStep, setCurrentStep] = useState('loading'); // loading, selection, crypto, voting, complete\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [votingProgress, setVotingProgress] = useState(0);\n  const [cryptoStatus, setCryptoStatus] = useState('');\n  const [bitcoinAddress, setBitcoinAddress] = useState('');\n  const [credential, setCredential] = useState(null);\n\n  const wabiSabiVoting = new WabiSabiVoting();\n\n  useEffect(() => {\n    loadElectionData();\n  }, [electionId]);\n\n  const loadElectionData = async () => {\n    try {\n      setLoading(true);\n      \n      // Load election details and candidates\n      const [electionResponse, candidatesResponse] = await Promise.all([\n        api.get(`/elections/${electionId}`),\n        api.get(`/elections/${electionId}/candidates`)\n      ]);\n\n      setElection(electionResponse.data.election);\n      setCandidates(candidatesResponse.data.candidates || []);\n      \n      // Check if user has already voted\n      if (electionResponse.data.election.hasVoted) {\n        setError('Hai gi√† votato in questa elezione');\n        setTimeout(() => navigate('/elections'), 3000);\n        return;\n      }\n      \n      setCurrentStep('selection');\n    } catch (err) {\n      console.error('Error loading election:', err);\n      setError('Errore nel caricamento dell\\'elezione');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCandidateSelect = (candidate) => {\n    setSelectedCandidate(candidate);\n    setError('');\n  };\n\n  const startVotingProcess = async () => {\n    if (!selectedCandidate) {\n      setError('Seleziona un candidato prima di procedere');\n      return;\n    }\n\n    setCurrentStep('crypto');\n    setCryptoStatus('Inizializzazione processo crittografico...');\n    setVotingProgress(0);\n\n    try {\n      // Step 1: Generate Bitcoin address for this voting session\n      setCryptoStatus('Generazione indirizzo Bitcoin...');\n      setVotingProgress(20);\n      \n      const addressData = await wabiSabiVoting.generateVotingAddress(user.id, electionId);\n      setBitcoinAddress(addressData.address);\n\n      // Step 2: Request KVAC credentials\n      setCryptoStatus('Richiesta credenziali anonime KVAC...');\n      setVotingProgress(40);\n      \n      const credentialData = await wabiSabiVoting.requestCredentials(user.id, electionId);\n      setCredential(credentialData);\n\n      // Step 3: Create vote commitment\n      setCryptoStatus('Creazione commitment crittografico...');\n      setVotingProgress(60);\n      \n      const voteCommitment = await wabiSabiVoting.createVoteCommitment(\n        selectedCandidate.id,\n        credentialData.serialNumber,\n        addressData.privateKey\n      );\n\n      // Step 4: Generate zero-knowledge proof\n      setCryptoStatus('Generazione prova zero-knowledge...');\n      setVotingProgress(80);\n      \n      const zkProof = await wabiSabiVoting.generateZKProof(\n        voteCommitment,\n        credentialData,\n        selectedCandidate.valueEncoding\n      );\n\n      // Step 5: Submit anonymous vote\n      setCryptoStatus('Invio voto anonimo...');\n      setVotingProgress(90);\n      setCurrentStep('voting');\n\n      const voteSubmissionResult = await wabiSabiVoting.submitAnonymousVote({\n        electionId,\n        commitment: voteCommitment.commitment,\n        zkProof,\n        serialNumber: credentialData.serialNumber,\n        bitcoinAddress: addressData.address\n      });\n\n      // Step 6: Wait for CoinJoin completion\n      setCryptoStatus('Attesa aggregazione CoinJoin...');\n      setVotingProgress(100);\n\n      await wabiSabiVoting.waitForCoinJoinCompletion(voteSubmissionResult.voteId);\n\n      // Complete\n      setCurrentStep('complete');\n      setCryptoStatus('Voto registrato con successo sulla blockchain!');\n\n    } catch (err) {\n      console.error('Voting process error:', err);\n      setError(`Errore durante il processo di voto: ${err.message}`);\n      setCurrentStep('selection');\n      setVotingProgress(0);\n    }\n  };\n\n  const goBackToElections = () => {\n    navigate('/elections');\n  };\n\n  const viewResults = () => {\n    navigate('/results');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\"></div>\n        <p>Caricamento elezione...</p>\n      </div>\n    );\n  }\n\n  if (error && !election) {\n    return (\n      <div className=\"error-container\">\n        <AlertCircle size={48} />\n        <h3>Errore</h3>\n        <p>{error}</p>\n        <button onClick={goBackToElections} className=\"button secondary\">\n          <ArrowLeft size={20} />\n          Torna alle Elezioni\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"voting-page\">\n      <div className=\"voting-header\">\n        <button onClick={goBackToElections} className=\"back-button\">\n          <ArrowLeft size={20} />\n          Indietro\n        </button>\n        <div className=\"election-info\">\n          <h2>{election?.title}</h2>\n          <p>{election?.description}</p>\n        </div>\n      </div>\n\n      {/* Step Indicator */}\n      <div className=\"step-indicator\">\n        <div className={`step ${currentStep === 'selection' || currentStep === 'crypto' || currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`}>\n          <Users size={24} />\n          <span>Selezione</span>\n        </div>\n        <div className={`step ${currentStep === 'crypto' || currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`}>\n          <Shield size={24} />\n          <span>Crittografia</span>\n        </div>\n        <div className={`step ${currentStep === 'voting' || currentStep === 'complete' ? 'active' : ''}`}>\n          <Vote size={24} />\n          <span>Voto</span>\n        </div>\n        <div className={`step ${currentStep === 'complete' ? 'active' : ''}`}>\n          <CheckCircle size={24} />\n          <span>Completato</span>\n        </div>\n      </div>\n\n      {/* Candidate Selection Step */}\n      {currentStep === 'selection' && (\n        <div className=\"voting-step\">\n          <div className=\"step-header\">\n            <h3>Seleziona il Candidato</h3>\n            <p>Scegli il candidato per il quale vuoi esprimere il tuo voto anonimo</p>\n          </div>\n\n          <div className=\"candidates-grid\">\n            {candidates.map((candidate) => (\n              <div \n                key={candidate.id} \n                className={`candidate-card ${selectedCandidate?.id === candidate.id ? 'selected' : ''}`}\n                onClick={() => handleCandidateSelect(candidate)}\n              >\n                <div className=\"candidate-info\">\n                  <h4>{candidate.firstName} {candidate.lastName}</h4>\n                  {candidate.party && <p className=\"party\">{candidate.party}</p>}\n                  {candidate.biography && <p className=\"biography\">{candidate.biography}</p>}\n                </div>\n                {selectedCandidate?.id === candidate.id && (\n                  <div className=\"selected-indicator\">\n                    <CheckCircle size={24} />\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {error && (\n            <div className=\"alert alert-error\">\n              <AlertCircle size={20} />\n              {error}\n            </div>\n          )}\n\n          <div className=\"step-actions\">\n            <button \n              onClick={startVotingProcess}\n              disabled={!selectedCandidate}\n              className=\"button primary large\"\n            >\n              <Shield size={20} />\n              Procedi con Voto Anonimo\n            </button>\n          </div>\n\n          <div className=\"privacy-notice\">\n            <Lock size={16} />\n            <p>\n              Il tuo voto sar√† completamente anonimo grazie al protocollo WabiSabi. \n              Nessuno potr√† collegare il tuo voto alla tua identit√†.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Cryptographic Process Step */}\n      {(currentStep === 'crypto' || currentStep === 'voting') && (\n        <div className=\"voting-step\">\n          <div className=\"step-header\">\n            <h3>Processo Crittografico WabiSabi</h3>\n            <p>Stiamo rendendo il tuo voto completamente anonimo...</p>\n          </div>\n\n          <div className=\"crypto-progress\">\n            <div className=\"progress-bar\">\n              <div \n                className=\"progress-fill\" \n                style={{ width: `${votingProgress}%` }}\n              ></div>\n            </div>\n            <p className=\"progress-text\">{votingProgress}%</p>\n          </div>\n\n          <div className=\"crypto-status\">\n            <Loader size={20} className=\"spinning\" />\n            <span>{cryptoStatus}</span>\n          </div>\n\n          {bitcoinAddress && (\n            <div className=\"bitcoin-info\">\n              <div className=\"info-item\">\n                <Bitcoin size={16} />\n                <span>Indirizzo Bitcoin generato:</span>\n              </div>\n              <code className=\"bitcoin-address\">{bitcoinAddress}</code>\n            </div>\n          )}\n\n          {credential && (\n            <div className=\"credential-info\">\n              <div className=\"info-item\">\n                <Key size={16} />\n                <span>Credenziale KVAC ricevuta</span>\n              </div>\n              <code className=\"serial-number\">Serial: {credential.serialNumber.substring(0, 16)}...</code>\n            </div>\n          )}\n\n          <div className=\"crypto-explanation\">\n            <h4>Cosa sta succedendo:</h4>\n            <ul>\n              <li>‚úÖ Generazione di un indirizzo Bitcoin unico per questa votazione</li>\n              <li>‚úÖ Richiesta di credenziali anonime KVAC</li>\n              <li>‚úÖ Creazione di un commitment crittografico del voto</li>\n              <li>‚úÖ Generazione di prove zero-knowledge</li>\n              <li>üîÑ Invio del voto anonimo al coordinatore</li>\n              <li>‚è≥ Attesa dell'aggregazione CoinJoin</li>\n            </ul>\n          </div>\n        </div>\n      )}\n\n      {/* Completion Step */}\n      {currentStep === 'complete' && (\n        <div className=\"voting-step\">\n          <div className=\"completion-header\">\n            <CheckCircle size={64} className=\"success-icon\" />\n            <h3>Voto Registrato con Successo!</h3>\n            <p>Il tuo voto anonimo √® stato registrato sulla blockchain Bitcoin</p>\n          </div>\n\n          <div className=\"completion-details\">\n            <div className=\"detail-card\">\n              <Shield size={32} />\n              <h4>Anonimato Garantito</h4>\n              <p>Il tuo voto √® stato mixato con altri voti attraverso il protocollo WabiSabi, rendendo impossibile risalire alla tua identit√†.</p>\n            </div>\n\n            <div className=\"detail-card\">\n              <Bitcoin size={32} />\n              <h4>Registrato su Blockchain</h4>\n              <p>Il voto √® stato permanentemente registrato sulla blockchain Bitcoin, garantendo immutabilit√† e verificabilit√†.</p>\n            </div>\n\n            <div className=\"detail-card\">\n              <Lock size={32} />\n              <h4>Processo Sicuro</h4>\n              <p>Sono state utilizzate credenziali crittografiche avanzate e prove zero-knowledge per proteggere la tua privacy.</p>\n            </div>\n          </div>\n\n          <div className=\"completion-actions\">\n            <button onClick={viewResults} className=\"button primary\">\n              <Vote size={20} />\n              Visualizza Risultati\n            </button>\n            <button onClick={goBackToElections} className=\"button secondary\">\n              <ArrowLeft size={20} />\n              Torna alle Elezioni\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VotingPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}